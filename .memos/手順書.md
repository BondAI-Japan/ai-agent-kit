# AI Agent Kit 開発手順書

## 1. プロジェクトのセットアップ

### 1.1 基本設定

```bash
# プロジェクトディレクトリの作成
mkdir ai-agent-kit
cd ai-agent-kit

# パッケージマネージャの初期化
pnpm init

# TypeScript設定
pnpm add -D typescript @types/node
pnpm tsc --init
```

### 1.2 必要なパッケージのインストール

```bash
# 主要な依存関係
pnpm add ai @ai-sdk/react @ai-sdk/openai zod

# 開発用の依存関係
pnpm add -D @types/react @types/react-dom tsup
```

## 2. プロジェクト構造

```
ai-agent-kit/
├── src/
│   ├── core/
│   │   ├── types.ts          # 型定義
│   │   ├── constants.ts      # 定数
│   │   └── errors.ts         # エラー定義
│   ├── agents/
│   │   ├── base.ts          # 基本エージェントクラス
│   │   ├── workflow.ts      # ワークフローエージェント
│   │   └── autonomous.ts    # 自律エージェント
│   ├── tools/
│   │   ├── base.ts          # 基本ツールクラス
│   │   └── common/          # 共通ツール
│   ├── hooks/
│   │   ├── useAgent.ts      # エージェントフック
│   │   └── useTools.ts      # ツールフック
│   └── index.ts             # メインエントリーポイント
├── examples/                 # 使用例
├── tests/                   # テストファイル
├── package.json
└── tsconfig.json
```

## 3. 主要コンポーネントの実装

### 3.1 基本エージェントクラス

```typescript
// src/agents/base.ts
import { StreamingTextResponse } from "ai";

export abstract class BaseAgent {
  protected model: any;
  protected tools: any[];

  constructor(config: AgentConfig) {
    this.model = config.model;
    this.tools = config.tools || [];
  }

  abstract execute(input: string): Promise<StreamingTextResponse>;
}
```

### 3.2 React フック

```typescript
// src/hooks/useAgent.ts
import { useChat } from "@ai-sdk/react";
import type { BaseAgent } from "../agents/base";

export function useAgent(agent: BaseAgent, config?: AgentConfig) {
  const chat = useChat({
    api: agent.getEndpoint(),
    ...config,
  });

  return {
    ...chat,
    agent,
  };
}
```

## 4. パッケージ設定

### 4.1 package.json の設定

```json
{
  "name": "ai-agent-kit",
  "version": "0.1.0",
  "main": "dist/index.js",
  "module": "dist/index.mjs",
  "types": "dist/index.d.ts",
  "files": ["dist"],
  "scripts": {
    "build": "tsup",
    "dev": "tsup --watch",
    "test": "jest"
  },
  "peerDependencies": {
    "react": ">=18.0.0",
    "react-dom": ">=18.0.0",
    "ai": "^4.0.0",
    "@ai-sdk/react": "^4.0.0"
  }
}
```

### 4.2 tsup.config.ts の設定

```typescript
import { defineConfig } from "tsup";

export default defineConfig({
  entry: ["src/index.ts"],
  format: ["cjs", "esm"],
  dts: true,
  splitting: false,
  sourcemap: true,
  clean: true,
});
```

## 5. 使用例の作成

### 5.1 基本的な使用例

```typescript
// examples/simple-chat.tsx
import { useAgent } from "ai-agent-kit";
import { WorkflowAgent } from "ai-agent-kit/agents";

export default function SimpleChat() {
  const agent = new WorkflowAgent({
    model: "gpt-4",
    tools: [
      /* ツール設定 */
    ],
  });

  const { messages, input, handleInputChange, handleSubmit } = useAgent(agent);

  return <div>{/* チャットUI実装 */}</div>;
}
```

## 6. パッケージの公開手順

1. パッケージのビルド

```bash
pnpm build
```

2. npm への公開準備

```bash
# パッケージ内容の確認
npm pack --dry-run

# npmにログイン
npm login
```

3. パッケージの公開

```bash
npm publish --access public
```

## 7. 今後の開発計画

### Phase 1 (v0.1.0)

- [x] 基本的なエージェントフレームワークの実装
- [x] Vercel AI SDK との統合
- [x] 基本的なツール実装

### Phase 2 (v0.2.0)

- [ ] より多くのツールの追加
- [ ] メモリシステムの実装
- [ ] エラーハンドリングの強化

### Phase 3 (v1.0.0)

- [ ] パフォーマンス最適化
- [ ] 完全なドキュメント整備
- [ ] テストカバレッジの向上

## 8. 注意点

1. **シンプルさの維持**

   - 必要最小限の機能から始める
   - 段階的に機能を追加

2. **TypeScript 対応**

   - 型定義の充実
   - 開発者体験の向上

3. **エラーハンドリング**

   - わかりやすいエラーメッセージ
   - リカバリー方法の提示

4. **ドキュメント**
   - 基本的な使用方法
   - 具体的な実装例
   - トラブルシューティングガイド
